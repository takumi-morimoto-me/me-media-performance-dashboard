# デザイン定義書：予実管理ダッシュボード

本文書は、予実管理ダッシュボードのUI/UXの一貫性を確保し、効率的な開発を促進するためのデザインの基本原則とルールを定義するものである。

## 1. デザイン哲学と基本原則

本ダッシュボードのデザインは、以下の哲学を核とする。

> "Less is more, simple is better."
> (より少ないことは、より豊かなこと。シンプルであることは、より良いこと。)

この哲学に基づき、本質的な価値提供に繋がるデザインを追求する。

- **明瞭性 (Clarity)**: 華美な装飾を排し、データと情報が主役であることを徹底する。ユーザーが一目で情報を理解できる、クリーンで直感的なデザインを目指す。
- **効率性 (Efficiency)**: ユーザーが目的の操作（データ入力、確認、分析）を最小限のステップで達成できる、効率的なUIを提供する。
- **一貫性 (Consistency)**: アプリケーション内のどの画面を見ても、同じ操作感、同じルック＆フィールを提供し、学習コストを下げる。
- **遊び心 (Playfulness)**: 機能性を損なわない範囲で、心地よいマイクロインタラクションやユニークなローディング表示など、ユーザーが少しだけ楽しくなるような「遊び心」を細部に加える。

## 2. レイアウトとグリッドシステム

画面レイアウトの基本は、レスポンシブデザインに対応した12カラムグリッドシステムを採用する。これにより、様々な画面サイズに対して柔軟かつ整然としたレイアウトを実現する。Tailwind CSSのグリッド機能（`grid-cols-12`など）を積極的に活用する。

### 基本構成

- **モバイル (〜768px)**: 基本的に1カラムとし、要素を縦に積むレイアウトを主とする。
- **タブレット (768px〜1024px)**: 4カラム、6カラム、8カラムなどを組み合わせ、情報を横に並べるレイアウトも採用する。
- **デスクトップ (1024px〜)**: 12カラムを最大限に活用し、複数のカードや情報を一覧できるダッシュボードらしいレイアウトを構築する。

### メインレイアウト

アプリケーションの基本構造は、固定のサイドナビゲーションとヘッダー、そしてメインコンテンツエリアで構成する。

コンテンツエリアのみがスクロール対象となり、アプリケーション全体のスクロールは発生させない。

## 3. スペーシング (Spacing)

コンポーネント間の余白（マージン）や内側の余白（パディング）は、8pxを基本単位 (1rem = 16px) とする。Tailwind CSSのデフォルトのスペーシングスケール（`1` = 0.25rem = 4px）と完全に一致するため、4px単位での微調整も許容する。

| 名称 | Tailwindクラス (例) | px値 | 用途 |
| :--- | :--- | :--- | :--- |
| XXS | `p-1`, `m-1` | 4px | アイコン周りなど、ごく僅かな調整 |
| XS | `p-2`, `m-2` | 8px | テキストとアイコンの間、小さな要素間 |
| S | `p-3`, `m-3` | 12px | - |
| M | `p-4`, `m-4` | 16px | 標準的な要素間の余白 |
| L | `p-6`, `m-6` | 24px | カード内の余白、セクション間の余白 |
| XL | `p-8`, `m-8` | 32px | 大きなセクション間の余白 |

## 4. カラーパレット (Color Palette)

`shadcn/ui`のセットアップで選択した**Slate**をベースカラーとし、アプリケーション全体で色調を統一する。色は役割（セマンティクス）ごとに定義し、`tailwind.config.ts`で管理する。

- **Primary**: アプリケーションの主要なアクションボタン、リンク、アクティブな要素に使用。
- **Background**: ページ全体の背景色、カードやモーダルの背景色に使用。
- **Foreground**: 主なテキストの色。
- **Border**: カードの境界線や区切り線に使用。
- **State Colors**:
  - **Success (成功)**: `green` - 保存成功の通知など。
  - **Warning (警告)**: `yellow` or `orange` - 注意を促すメッセージなど。
  - **Destructive (破壊的/エラー)**: `red` - 削除ボタン、エラーメッセージなど。

## 5. タイポグラフィ (Typography)

フォントは、UIとしての可読性に優れた**Inter**をアプリケーション全体の基本フォントとして採用する。

| 要素 | フォントサイズ (Tailwind) | フォントウェイト (Tailwind) | 用途 |
| :--- | :--- | :--- | :--- |
| H1 | `text-3xl` (36px) | `font-bold` | ページタイトル |
| H2 | `text-2xl` (24px) | `font-bold` | カードタイトル、大見出し |
| H3 | `text-xl` (20px) | `font-semibold` | 中見出し |
| Body (本文) | `text-base` (16px) | `font-normal` | 標準のテキスト |
| Small (補助) | `text-sm` (14px) | `font-normal` | 補助的なテキスト、ラベル |
| Tiny (極小) | `text-xs` (12px) | `font-normal` | グラフの軸ラベルなど |

## 6. コンポーネントスタイル

`shadcn/ui`で提供されるコンポーネントの基本スタイルを定義する。「Less is more」の哲学に従い、フラットでクリーンなデザインを基本とする。

- **角丸 (Border Radius)**: アプリケーション全体で角丸の半径を統一する。`shadcn/ui`のデフォルト値（0.5rem）を基本とし、`Button`, `Card`, `Input`など全てのコンポーネントで一貫させる。
- **境界線 (Borders)**: 影（Shadows）は原則として使用しない。要素の境界は、背景色とのコントラストや、細い境界線（Border）によって表現する。
- **コンポーネントの状態**: 全てのインタラクティブなコンポーネント（ボタン、入力欄、リストアイテムなど）において、通常時, ホバー時, フォーカス時, 無効時の状態を視覚的に明確に区別する。これは`shadcn/ui`のデフォルトスタイルを尊重し、基本的に変更しない。

## 7. 階層化データ表示

勘定項目の大項目・小項目構造を表現するための視覚的ルールを定義する。

- **階層構造の視覚的表現**:
  - **大項目ヘッダー**: `font-semibold`を使用し、背景色を`muted`で区別する。
  - **小項目行**: 通常の`font-normal`を使用し、大項目との視覚的階層を明確にする。
  - **インデンテーション**: 小項目は大項目に対して視覚的なインデンテーション（左寄せ）は行わず、フラットな表示を維持する。

- **展開・折りたたみ機能**:
  - 大項目行には`ChevronRight`/`ChevronDown`アイコンを配置し、クリック可能であることを示す。
  - アイコンのトランジション: 展開・折りたたみ時には`transition-transform duration-200`でスムーズなアニメーションを提供する。

- **CSVインポート・データ管理UI**:
  - **プレビューテーブル**: インポート前のデータ確認用テーブルは、通常のデータグリッドと同じスタイリングを適用する。
  - **マッピング表示**: 類似度による自動マッピングは`Badge`コンポーネントで視覚的に表示し、`badge-secondary`スタイルを使用する。
  - **新項目確認**: 新しく作成される項目は`badge-outline`で強調表示し、ユーザーが容易に識別できるようにする。

## 8. 状態とフィードバック

ユーザーアクションに対する適切なフィードバックを提供するための規則。

- **データ保存状態**:
  - 保存中: `Skeleton`コンポーネントまたは微細なローディングインジケーターを表示する。
  - 保存成功: `Sonner`（Toast）で短時間の成功メッセージを表示する。
  - 保存失敗: エラー内容を`Alert`コンポーネントで表示し、ユーザーが対処法を理解できるようにする。

- **インタラクション状態**:
  - **編集可能セル**: フォーカス時に境界線色を`primary`に変更し、編集モードであることを明示する。
  - **読み取り専用セル**: 背景色を`muted`にして、編集不可であることを視覚的に示す。
  - **新規作成フロー**: 段階的なプロセス（インポート→マッピング→確認→作成）をわかりやすく表現するため、各ステップでタイトルと進行状況を明示する。
