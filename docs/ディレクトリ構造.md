# ディレクトリ構造ガイド

このドキュメントは、プロジェクトのディレクトリ構造と、それぞれのディレクトリが担う役割について説明します。

## 図解

```
me-media-performance-dashboard/
├── .firebaserc
├── .gitignore
├── CLAUDE.md
├── GEMINI.md
├── components.json
├── docs/
│   ├── 全体要件定義書.md
│   ├── ディレクトリ構造.md
│   ├── 詳細要件定義_予算管理画面.md
│   ├── 詳細要件定義_設定ページ.md
│   ├── デザイン定義書.md
│   └── 修正履歴.md                    # 🆕 修正履歴
├── firebase.json
├── firestore.indexes.json
├── firestore.rules
├── functions/
├── next.config.ts
├── package.json
├── pnpm-lock.yaml
├── public/
│   ├── 404.html
│   ├── dict/                          # 🆕 日本語形態素解析辞書
│   └── index.html
├── storage.rules
├── tailwind.config.ts
└── src/
    ├── app/
    │   ├── budget/
    │   │   └── page.tsx
    │   ├── dashboard/
    │   │   └── page.tsx
    │   ├── media/
    │   │   └── [slug]/                 # 🆕 動的ルーティング
    │   │       └── page.tsx
    │   ├── performance/
    │   │   └── page.tsx
    │   ├── settings/
    │   │   └── page.tsx
    │   ├── globals.css
    │   ├── layout.tsx
    │   └── page.tsx
    ├── components/
    │   ├── layout/
    │   │   ├── app-sidebar.tsx
    │   │   └── header.tsx
    │   ├── settings/                   # 🆕 設定画面専用コンポーネント
    │   │   └── account-item-manager.tsx
    │   ├── shared/
    │   │   ├── budget-grid.tsx
    │   │   ├── csv-import-dialog.tsx   # 🆕 CSVインポート
    │   │   ├── editable-cell.tsx
    │   │   ├── editable-row-header.tsx
    │   │   ├── hierarchical-spreadsheet-grid.tsx  # 🆕 階層化グリッド
    │   │   ├── new-items-confirmation-dialog.tsx  # 🆕 新項目確認
    │   │   ├── page-filters.tsx
    │   │   ├── spreadsheet-grid.tsx     # レガシー（互換性のため保持）
    │   │   └── trend-graph-card.tsx
    │   ├── ui/                         # shadcn/ui コンポーネント
    │   │   ├── alert-dialog.tsx        # 🆕
    │   │   ├── alert.tsx               # 🆕
    │   │   ├── avatar.tsx
    │   │   ├── badge.tsx               # 🆕
    │   │   ├── button.tsx
    │   │   ├── card.tsx
    │   │   ├── checkbox.tsx            # 🆕
    │   │   ├── collapsible.tsx
    │   │   ├── dialog.tsx
    │   │   ├── dropdown-menu.tsx
    │   │   ├── input.tsx
    │   │   ├── label.tsx
    │   │   ├── select.tsx
    │   │   ├── separator.tsx
    │   │   ├── sheet.tsx
    │   │   ├── sidebar.tsx
    │   │   ├── skeleton.tsx
    │   │   ├── sonner.tsx
    │   │   ├── switch.tsx
    │   │   ├── table.tsx
    │   │   └── tooltip.tsx
    │   ├── nav-main.tsx
    │   ├── nav-projects.tsx
    │   ├── nav-user.tsx
    │   └── team-switcher.tsx
    ├── contexts/                       # 🆕 React Context
    │   └── media-context.tsx
    ├── hooks/
    │   ├── use-mobile.ts
    │   └── use-spreadsheet.ts
    ├── lib/
    │   ├── account-service.ts          # 🆕 勘定項目管理サービス
    │   ├── firebase.ts                 # Firebase初期化
    │   ├── media-service.ts            # メディア管理サービス
    │   ├── nav-data.ts                 # ナビゲーション定義
    │   └── utils.ts                    # 共通ユーティリティ
    └── types/                          # 🆕 TypeScript型定義
        └── account-items.ts            # 勘定項目関連の型定義
```

## `src`

ソースコードのルートディレクトリです。アプリケーションのすべてのロジック、コンポーネント、スタイルなどがこの中に配置されます。

(中略)

### `src/app`

Next.js App Routerによるページルーティング。各ディレクトリが URLパスに対応：
- `budget/`: 予算管理画面
- `dashboard/`: ダッシュボード画面
- `media/[slug]/`: 動的ルーティング（メディア別詳細画面）
- `performance/`: 実績管理画面
- `settings/`: 設定画面

### `src/components`

#### `src/components/layout`
レイアウト関連コンポーネント：
- `app-sidebar.tsx`: サイドバーナビゲーション
- `header.tsx`: ヘッダーコンポーネント

#### `src/components/settings`
設定画面専用コンポーネント：
- `account-item-manager.tsx`: 階層化勘定項目の管理UI

#### `src/components/shared`
複数のページで共有されるビジネスロジックコンポーネント：
- `budget-grid.tsx`: 予算グリッドのラッパー
- `hierarchical-spreadsheet-grid.tsx`: 階層化対応スプレッドシート（メイン）
- `csv-import-dialog.tsx`: CSVインポート機能
- `new-items-confirmation-dialog.tsx`: 新項目作成確認
- `editable-cell.tsx`: 編集可能セル
- `page-filters.tsx`: ページ共通フィルター
- `spreadsheet-grid.tsx`: レガシーグリッド（互換性のため保持）

#### `src/components/ui`
shadcn/uiベースのUIコンポーネント。プロジェクト全体で使用される基本的なUI部品。

### `src/contexts`
React Context API によるグローバル状態管理：
- `media-context.tsx`: メディア情報の状態管理

### `src/hooks`
カスタムReactフック：
- `use-mobile.ts`: モバイル検出
- `use-spreadsheet.ts`: スプレッドシート機能

### `src/lib`
プロジェクト全体で利用される共通ライブラリ：
- `firebase.ts`: Firebase初期化・設定
- `media-service.ts`: メディア管理のビジネスロジック
- `account-service.ts`: 勘定項目管理のビジネスロジック
- `nav-data.ts`: ナビゲーションデータ定義
- `utils.ts`: 共通ユーティリティ関数

### `src/types`
TypeScript型定義：
- `account-items.ts`: 勘定項目関連の型定義

### `public`
静的ファイル：
- `dict/`: 日本語形態素解析用辞書（勘定項目のslug生成用）

### `docs`
プロジェクトドキュメント：
- 要件定義書、設計書、修正履歴などの技術文書